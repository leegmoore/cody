===== CODEX /REVIEW PROMPT FOR PHASE 1 =====

/review

Read these documents first:

1. docs/projects/02-ui-integration-phases/PRD.md
   - Section 2: Success Criteria (what this phase must deliver)
   - Section 5: Quality Standards (code quality, testing requirements)

2. docs/projects/02-ui-integration-phases/TECH-APPROACH.md
   - Section 2: Phase 1 Deep Dive (integration design, contracts, flow)

3. docs/core/dev-standards.md
   - Coding standards, TypeScript strict mode, patterns

4. docs/core/contract-testing-tdd-philosophy.md
   - Testing philosophy, mocked-service approach

5. phase-1/CHECKLIST.md
   - Verify all tasks complete

6. phase-1/DECISIONS.md
   - Review implementation choices

Focus review on:

**Integration Correctness:**
- CLI → ConversationManager wiring matches TECH-APPROACH Section 2 design
- ModelClient constructed correctly from config
- Conversation flow (CLI → Manager → Codex → Session → Client) works as designed
- No ported modules modified unnecessarily (changes only if integration revealed issues)

**Contract Coverage:**
- Mocked-service tests cover ConversationManager.createConversation() contract
- Mocked-service tests cover Conversation.sendMessage() contract
- Tests verify functional outcomes (not just technical correctness)
- External boundaries mocked (ModelClient, Config)

**Code Quality:**
- TypeScript strict mode (no any types)
- ESLint clean (0 errors)
- Proper error handling (config missing, API failures)
- Clear naming, JSDoc on new public methods

**Security:**
- No API keys hardcoded
- Config file path secure (~/.codex not user-controllable paths)
- Error messages don't leak sensitive data

**Testing:**
- Mocked-service tests meaningful (not just mock verification)
- Tests exercise complete workflows (create → send → verify)
- Multi-turn test verifies history maintained

Report critical/major/minor issues with file:line references.
Coder will address or argue each issue before phase completion.
